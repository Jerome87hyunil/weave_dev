# ì˜¤ë‹µë…¸íŠ¸ - Weave í”„ë¡œì íŠ¸

## ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **Next.js 15.4.7** - React ê¸°ë°˜ í’€ìŠ¤íƒ í”„ë ˆì„ì›Œí¬ (App Router)
- **React 19.1.0** - UI ë¼ì´ë¸ŒëŸ¬ë¦¬
- **TypeScript 5** - ì •ì  íƒ€ì… ê²€ì‚¬
- **Tailwind CSS 4** - ìœ í‹¸ë¦¬í‹° ê¸°ë°˜ CSS í”„ë ˆì„ì›Œí¬

### AI/ML
- **OpenAI API (v5.12.2)** - GPT ëª¨ë¸ ì—°ë™
- **Google Generative AI (v0.24.1)** - Gemini ëª¨ë¸ ì—°ë™

### Development Tools
- **Turbopack** - Next.js ê°œë°œ ì„œë²„ (ë¹ ë¥¸ ë¹Œë“œ)
- **ESLint** - ì½”ë“œ í’ˆì§ˆ ê´€ë¦¬

### ë°°í¬ í™˜ê²½
- **Vercel** - Next.js ìµœì í™” ë°°í¬ í”Œë«í¼ (ì˜ˆì •)

---

## 1. Event handlers cannot be passed to Client Component props

### ì˜¤ë¥˜ ìƒí™©
- Server Componentì—ì„œ Client Componentë¡œ í•¨ìˆ˜(ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬)ë¥¼ propsë¡œ ì „ë‹¬ ì‹œë„
- Next.js App Routerì—ì„œëŠ” ì„œë²„ ì»´í¬ë„ŒíŠ¸ê°€ ê¸°ë³¸ê°’

### í•´ê²° ë°©ë²•
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— 'use client' ì§€ì‹œì–´ ì¶”ê°€
- ë˜ëŠ” ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ë¥¼ í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ë¡œ ì´ë™

### ì ìš© ì½”ë“œ
```tsx
'use client'; // íŒŒì¼ ìµœìƒë‹¨ì— ì¶”ê°€

export default function Page() {
  // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì‚¬ìš© ê°€ëŠ¥
}
```

## 2. API Route 500 Internal Server Error

### ì˜¤ë¥˜ ìƒí™©
- API ë¼ìš°íŠ¸ì—ì„œ import ë¬¸ì„ íŒŒì¼ ìµœìƒë‹¨ì— ì‚¬ìš© ì‹œ ì´ˆê¸°í™” ì˜¤ë¥˜ ë°œìƒ
- Next.jsì˜ API ë¼ìš°íŠ¸ ì»´íŒŒì¼ ê³¼ì •ì—ì„œ ëª¨ë“ˆ ë¡œë”© ì´ìŠˆ

### í•´ê²° ë°©ë²•
- ë™ì  import ì‚¬ìš©í•˜ì—¬ ëŸ°íƒ€ì„ì— ëª¨ë“ˆ ë¡œë“œ
- try-catchë¡œ ì—ëŸ¬ í•¸ë“¤ë§ ê°•í™”
- ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•˜ì—¬ ë””ë²„ê¹… ìš©ì´

### ì ìš© ì½”ë“œ
```typescript
// ê¸°ì¡´ (ë¬¸ì œ ë°œìƒ)
import OpenAI from 'openai';
const openai = new OpenAI({...});

// ìˆ˜ì • (í•´ê²°)
const { default: OpenAI } = await import('openai');
const openai = new OpenAI({...});
```

## 3. Invalid MIME type ì˜¤ë¥˜ (OpenAI Vision API)

### ì˜¤ë¥˜ ìƒí™©
- OpenAI Vision APIì—ì„œ "400 Invalid MIME type. Only image types are supported" ì˜¤ë¥˜
- OpenAIì˜ Vision APIëŠ” ì´ë¯¸ì§€ë§Œ ì§€ì›, PDFë‚˜ ë‹¤ë¥¸ í˜•ì‹ ë¯¸ì§€ì›

### í•´ê²° ë°©ë²•
- Gemini 2.5 Flash Lite ëª¨ë¸ë¡œ ë³€ê²½ (ë©€í‹°ëª¨ë‹¬ ì§€ì›)
- ì´ë¯¸ì§€, PDF, ì˜¤ë””ì˜¤, ë¹„ë””ì˜¤ ëª¨ë‘ ì²˜ë¦¬ ê°€ëŠ¥
- ë” ì €ë ´í•œ ë¹„ìš©ìœ¼ë¡œ ë‹¤ì–‘í•œ íŒŒì¼ í˜•ì‹ ì²˜ë¦¬

### ì ìš© ì½”ë“œ
```typescript
// Gemini 2.5 Flash Lite - ë°ì´í„° ì¶”ì¶œ (ë©€í‹°ëª¨ë‹¬)
const model = genAI.getGenerativeModel({ 
  model: 'gemini-2.5-flash-lite'
});

// Gemini 2.5 Pro - ë¬¸ì„œ ìƒì„± (ê³ í’ˆì§ˆ)
const model = genAI.getGenerativeModel({ 
  model: 'gemini-2.5-pro' 
});
```

## 4. document.createElement is not a function ì˜¤ë¥˜

### ì˜¤ë¥˜ ìƒí™©
- í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ì—ì„œ document ê°ì²´ ì‚¬ìš© ì‹œ ì˜¤ë¥˜ ë°œìƒ
- 'use client' ì§€ì‹œì–´ê°€ ìˆì–´ë„ ì¼ë¶€ ìƒí™©ì—ì„œ ì„œë²„ ì‚¬ì´ë“œ ë Œë”ë§ ì¤‘ ì‹¤í–‰ë  ìˆ˜ ìˆìŒ
- Next.jsì˜ hydration ê³¼ì •ì—ì„œ ë°œìƒ ê°€ëŠ¥

### í•´ê²° ë°©ë²•
- windowì™€ document ê°ì²´ ì‚¬ìš© ì „ ë¸Œë¼ìš°ì € í™˜ê²½ ì²´í¬
- ì „ì—­ ê°ì²´ ì•ì— window. ëª…ì‹œì  ì‚¬ìš©
- appendChild/removeChildë¡œ DOM ì¡°ì‘ ì‹œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬

### ì ìš© ì½”ë“œ
```typescript
// ë¬¸ì œ ë°œìƒ ì½”ë“œ
const link = document.createElement('a');
link.click();
URL.revokeObjectURL(url);

// í•´ê²° ì½”ë“œ
if (typeof window === 'undefined' || typeof document === 'undefined') {
  console.error('ë¸Œë¼ìš°ì € í™˜ê²½ì´ ì•„ë‹™ë‹ˆë‹¤.');
  return;
}

const link = window.document.createElement('a');
window.document.body.appendChild(link);
link.click();
window.document.body.removeChild(link);
window.URL.revokeObjectURL(url);
```

## 5. ê³„ì•½ì„œ í…œí”Œë¦¿ ì•½ì‹/ìƒì„¸ êµ¬ë¶„ ë¯¸í‘œì‹œ

### ë¬¸ì œ ìƒí™©
- ì†Œí”„íŠ¸ì›¨ì–´ ìš©ì—­ ê³„ì•½ì„œê°€ ìƒì„¸ ë²„ì „ì¸ë° (ìƒì„¸) í‘œê¸°ê°€ ì—†ì—ˆìŒ
- ëŒ€ë¶€ë¶„ì˜ ê³„ì•½ì„œê°€ ìƒì„¸ ë²„ì „ë§Œ ìˆê³  ì•½ì‹ ë²„ì „ì´ ì—†ì—ˆìŒ
- ê³„ì•½ì„œê°€ ë§ì•„ì ¸ ì›í•˜ëŠ” ê³„ì•½ì„œ ì°¾ê¸° ì–´ë ¤ì›€

### í•´ê²° ë°©ë²•
1. ì†Œí”„íŠ¸ì›¨ì–´ ê³„ì•½ì„œ í…œí”Œë¦¿ ìƒì„± (ìƒì„¸/ì•½ì‹ ëª¨ë‘)
2. ê³„ì•½ì„œ ì¹´í…Œê³ ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„ (contract-categories.ts)
3. ì‹œê°ì  ê³„ì•½ì„œ ì„ íƒ UI ì»´í¬ë„ŒíŠ¸ ìƒì„± (ContractTemplateSelector.tsx)
   - ì¹´í…Œê³ ë¦¬ë³„ ê·¸ë¦¬ë“œ ë·° (ì´ëª¨ì§€ ì•„ì´ì½˜ í™œìš©)
   - ì¸ê¸° í…œí”Œë¦¿ ì„¹ì…˜
   - ê²€ìƒ‰ ê¸°ëŠ¥
   - ì•½ì‹/ìƒì„¸ ëª…í™•í•œ í‘œì‹œ

### ì ìš© ë‚´ìš©
```typescript
// ê³„ì•½ì„œ ì¹´í…Œê³ ë¦¬ ì •ì˜
{
  id: 'development',
  name: 'ê°œë°œ ê³„ì•½ì„œ',
  icon: 'ğŸ’»',
  color: 'bg-blue-100',
  contracts: [
    { id: 'software-contract-detailed', type: 'detailed' },
    { id: 'software-contract-simple', type: 'simple' }
  ]
}
```

## 6. í…œí”Œë¦¿ ì„ íƒ UI ê°œì„  - ëª¨ë‹¬ ì ìš©

### ë¬¸ì œ ìƒí™©
- ë¬¸ì„œ ìƒì„± í˜ì´ì§€ì—ì„œ í…œí”Œë¦¿ ì„ íƒì´ ë‹¨ìˆœ ë“œë¡­ë‹¤ìš´ìœ¼ë¡œ ë˜ì–´ ìˆì–´ ë¶ˆí¸
- ê²¬ì ì„œ í…œí”Œë¦¿ì´ ë‹¤ì–‘í•˜ì§€ ì•Šì•„ ì—…ì¢…ë³„ ë§ì¶¤í˜• ê²¬ì ì„œ í•„ìš”
- ê³„ì•½ì„œì™€ ê²¬ì ì„œ í…œí”Œë¦¿ ì„ íƒ ì‹œ ì‹œê°ì  UIê°€ ì—†ìŒ

### í•´ê²° ë°©ë²•
1. ì¬ì‚¬ìš© ê°€ëŠ¥í•œ Modal ì»´í¬ë„ŒíŠ¸ ìƒì„±
2. ê²¬ì ì„œ ì¹´í…Œê³ ë¦¬ ì‹œìŠ¤í…œ êµ¬í˜„ (8ê°œ ì—…ì¢…ë³„ ì¹´í…Œê³ ë¦¬)
   - IT/ê°œë°œ, ë””ìì¸/ì°½ì‘, ë§ˆì¼€íŒ…/ê´‘ê³ , ì»¨ì„¤íŒ…/êµìœ¡ ë“±
3. DocumentGeneratorì— ëª¨ë‹¬ í†µí•©
   - ë¬¸ì„œ ì¢…ë¥˜ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ í…œí”Œë¦¿ ì„ íƒ ëª¨ë‹¬ í‘œì‹œ
   - ê²¬ì ì„œ/ê³„ì•½ì„œ ê°ê° ì „ìš© ì„ íƒ UI ì œê³µ

### ì ìš© ë‚´ìš©
```typescript
// ëª¨ë‹¬ì„ í†µí•œ í…œí”Œë¦¿ ì„ íƒ
const handleDocumentTypeChange = (type: DocumentType) => {
  setDocumentType(type);
  if (type === 'contract' || type === 'quote') {
    setShowTemplateModal(true);  // ìë™ìœ¼ë¡œ ëª¨ë‹¬ í‘œì‹œ
  }
};
```

## 7. html2canvas lab() ìƒ‰ìƒ í•¨ìˆ˜ íŒŒì‹± ì˜¤ë¥˜

### ì˜¤ë¥˜ ìƒí™©
- PDF ë‚´ë³´ë‚´ê¸° ì‹œ "Attempting to parse an unsupported color function 'lab'" ì˜¤ë¥˜ ë°œìƒ
- Tailwind CSS v4ì—ì„œ ì‚¬ìš©í•˜ëŠ” lab(), lch(), oklch() ìƒ‰ìƒ í•¨ìˆ˜ë¥¼ html2canvasê°€ ì§€ì›í•˜ì§€ ëª»í•¨
- html2canvasëŠ” êµ¬ë²„ì „ CSS ìƒ‰ìƒ í˜•ì‹ë§Œ ì§€ì›

### í•´ê²° ë°©ë²•
1. PDF ìƒì„± ì „ ëª¨ë“  lab() ìƒ‰ìƒì„ hex ìƒ‰ìƒìœ¼ë¡œ ë³€í™˜
2. computed styleì—ì„œ lab() í•¨ìˆ˜ ê°ì§€ ì‹œ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë¡œ ëŒ€ì²´
3. Tailwind í´ë˜ìŠ¤ëª…ì„ ê¸°ë°˜ìœ¼ë¡œ ì ì ˆí•œ hex ìƒ‰ìƒ ë§¤í•‘
4. gradientì—ì„œ lab() ì‚¬ìš© ì‹œ ë‹¨ìƒ‰ìœ¼ë¡œ ëŒ€ì²´

### ì ìš© ì½”ë“œ
```typescript
// lab() ìƒ‰ìƒì„ hexë¡œ ë³€í™˜í•˜ëŠ” í•¨ìˆ˜
const convertLabColors = (el: HTMLElement) => {
  const processElement = (htmlElem: HTMLElement) => {
    const computedStyle = window.getComputedStyle(htmlElem);
    const properties = ['backgroundColor', 'color', 'borderColor', ...];
    
    properties.forEach(prop => {
      const value = computedStyle.getPropertyValue(prop);
      if (value && value.includes('lab')) {
        // Tailwind í´ë˜ìŠ¤ ê¸°ë°˜ìœ¼ë¡œ ì ì ˆí•œ hex ìƒ‰ìƒ ë§¤í•‘
        const className = htmlElem.className;
        let newColor = '#000000';
        
        if (className.includes('blue-500')) newColor = '#3b82f6';
        // ... ì¶”ê°€ ë§¤í•‘
        
        htmlElem.style.setProperty(prop, newColor, 'important');
      }
    });
  };
};
```